<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.eat.today.member.query.mapper.MemberMapper">

    <!-- 전화번호로 회원 아이디 조회 -->
    <select id="selectIdByPhone" parameterType="string" resultType="string">
        SELECT m.member_id
        FROM member m
        WHERE m.member_phone = #{memberPhone}  -- #{memberPhone} 이부분이 사용자 입력값(postman 으로 할 때)
    </select>

    <!-- 내 프로필 조회 -->
    <select id="findMyProfile" parameterType="string" resultType="com.eat.today.member.query.dto.MemberDTO">
        SELECT m.member_name,
               m.member_birth,
               m.member_phone,
               m.member_level,
               CASE
                   WHEN m.member_active = 1 THEN '활동회원'
                   WHEN m.member_active = 0 THEN '비활성 회원'
                   END member_status                            -- 1일때는 활동회원 0일때는 비활성 회원 출력
        FROM member m
        WHERE m.member_no = #{memberNo};
    </select>

</mapper>


